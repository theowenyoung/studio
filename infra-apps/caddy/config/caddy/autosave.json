{"apps":{"http":{"servers":{"srv0":{"automatic_https":{"disable":true},"listen":[":443"],"logs":{"logger_names":{"admin.localhost":["log1"],"api.localhost":["log2"],"app.localhost":["log0"],"db.localhost":["log3"]}},"routes":[{"handle":[{"handler":"subroute","routes":[{"handle":[{"handler":"reverse_proxy","headers":{"request":{"set":{"Host":["{http.request.host}"],"X-Forwarded-For":["{http.request.remote.host}"],"X-Forwarded-Proto":["{http.request.scheme}"],"X-Real-Ip":["{http.request.remote.host}"]}}},"upstreams":[{"dial":"admin-app:3001"}]}]}]}],"match":[{"host":["admin.localhost"]}],"terminal":true},{"handle":[{"handler":"subroute","routes":[{"group":"group6","handle":[{"handler":"subroute","routes":[{"handle":[{"handler":"vars","root":"/data"},{"browse":{},"handler":"file_server","hide":["/etc/caddy/Caddyfile"]}]}]}],"match":[{"path":["/uploads/*"]}]},{"group":"group6","handle":[{"handler":"subroute","routes":[{"handle":[{"handler":"vars","root":"/data/uploads"},{"browse":{},"handler":"file_server","hide":["/etc/caddy/Caddyfile"]}]}]}],"match":[{"path":["/static/*"]}]},{"group":"group6","handle":[{"handler":"subroute","routes":[{"handle":[{"handler":"headers","response":{"set":{"Content-Type":["text/plain"]}}},{"body":"OK","handler":"static_response","status_code":200}]}]}],"match":[{"path":["/health"]}]},{"group":"group6","handle":[{"handler":"subroute","routes":[{"handle":[{"handler":"reverse_proxy","headers":{"request":{"set":{"Host":["{http.request.host}"],"X-Forwarded-For":["{http.request.remote.host}"],"X-Forwarded-Proto":["{http.request.scheme}"],"X-Real-Ip":["{http.request.remote.host}"]}}},"upstreams":[{"dial":"app:3000"}]}]}]}],"match":[{"path":["/api/*"]}]},{"group":"group6","handle":[{"handler":"subroute","routes":[{"handle":[{"handler":"reverse_proxy","headers":{"request":{"set":{"Host":["{http.request.host}"],"X-Forwarded-For":["{http.request.remote.host}"],"X-Forwarded-Proto":["{http.request.scheme}"],"X-Real-Ip":["{http.request.remote.host}"]}}},"upstreams":[{"dial":"app:3000"}]}]}]}]}]}],"match":[{"host":["app.localhost"]}],"terminal":true},{"handle":[{"handler":"subroute","routes":[{"handle":[{"handler":"reverse_proxy","headers":{"request":{"set":{"Host":["{http.request.host}"],"X-Forwarded-For":["{http.request.remote.host}"],"X-Forwarded-Proto":["{http.request.scheme}"],"X-Real-Ip":["{http.request.remote.host}"]}}},"upstreams":[{"dial":"api-service:8080"}]}]}]}],"match":[{"host":["api.localhost"]}],"terminal":true},{"handle":[{"handler":"subroute","routes":[{"handle":[{"handler":"reverse_proxy","headers":{"request":{"set":{"Host":["{http.request.host}"],"X-Forwarded-For":["{http.request.remote.host}"],"X-Forwarded-Proto":["{http.request.scheme}"],"X-Real-Ip":["{http.request.remote.host}"]}}},"upstreams":[{"dial":"pgadmin:80"}]}]}]}],"match":[{"host":["db.localhost"]}],"terminal":true}],"tls_connection_policies":[{"certificate_selection":{"any_tag":["cert0"]},"match":{"sni":["app.localhost"]}},{}]},"srv1":{"automatic_https":{"disable":true},"listen":[":80"],"routes":[{"handle":[{"handler":"subroute","routes":[{"handle":[{"handler":"static_response","headers":{"Location":["https://{http.request.host}{http.request.uri}"]},"status_code":301}]}]}],"match":[{"host":["app.localhost","admin.localhost","api.localhost","db.localhost"]}],"terminal":true}]}}},"tls":{"automation":{"policies":[{"issuers":[{"module":"internal"}]}]},"certificates":{"load_files":[{"certificate":"/certs/localhost+5.pem","key":"/certs/localhost+5-key.pem","tags":["cert0"]}]}}},"logging":{"logs":{"default":{"exclude":["http.log.access.log0","http.log.access.log1","http.log.access.log2","http.log.access.log3"]},"log0":{"encoder":{"format":"json"},"include":["http.log.access.log0"],"level":"INFO","writer":{"filename":"/var/log/caddy/app-access.log","output":"file"}},"log1":{"encoder":{"format":"json"},"include":["http.log.access.log1"],"level":"INFO","writer":{"filename":"/var/log/caddy/admin-access.log","output":"file"}},"log2":{"encoder":{"format":"json"},"include":["http.log.access.log2"],"level":"INFO","writer":{"filename":"/var/log/caddy/api-access.log","output":"file"}},"log3":{"encoder":{"format":"json"},"include":["http.log.access.log3"],"level":"INFO","writer":{"filename":"/var/log/caddy/db-access.log","output":"file"}}}}}