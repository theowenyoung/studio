{
    # 全局配置
    email owen@owenyoung.com

    # 日志输出到 stdout，由 Docker logging driver 管理
    log {
        level INFO
        output stdout
        format json
    }

    # 性能优化
    servers {
        # 协议优化（启用 HTTP/3）
        protocols h1 h2 h3

        # 连接超时
        timeouts {
            read_body   30s
            read_header 30s
            write       30s
            idle        5m
        }

        # 最大请求头大小（10MB）
        max_header_size 10MB
    }
}

# ==================== SSG Sites (nginx containers) ====================

remove-cf-for-aigateway.owenyoung.com {
  reverse_proxy https://gateway.ai.cloudflare.com  {
    header_up -cf-*
    header_up Host gateway.ai.cloudflare.com
  }
}
# Blog
blog-demo.owenyoung.com {
    reverse_proxy blog:3000
}

# Storefront
storefront-demo.owenyoung.com {
    reverse_proxy storefront:3000
}

# ==================== Application Services ====================
# API
api-demo.owenyoung.com {
    reverse_proxy api:3000
}

# Hono Demo
hono-demo.owenyoung.com {
    reverse_proxy hono-demo:3000
}

# Proxy
proxy-demo.owenyoung.com {
    reverse_proxy proxy:3000
}
